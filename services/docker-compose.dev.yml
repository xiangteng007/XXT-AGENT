version: "3.9"
services:
  market-streamer:
    build: ./market-streamer
    environment:
      GCP_PROJECT_ID: "local"
      TOPIC_RAW_MARKET: "raw.market.local"
      ALWAYS_ON: "true"
    ports: ["8081:8080"]

  news-collector:
    build: ./news-collector
    environment:
      GCP_PROJECT_ID: "local"
      TOPIC_RAW_NEWS: "raw.news.local"
    ports: ["8082:8080"]

  social-worker:
    build: ./social-worker
    environment:
      GCP_PROJECT_ID: "local"
      TOPIC_RAW_SOCIAL: "raw.social.local"
    ports: ["8083:8080"]

  event-fuser:
    build: ./event-fuser
    environment:
      GCP_PROJECT_ID: "local"
      TOPIC_FUSED_EVENT: "fused.event.local"
      ALWAYS_ON: "false" # streaming pull requires real pubsub; disable locally
    ports: ["8084:8080"]

  notifier:
    build: ./notifier
    environment:
      GCP_PROJECT_ID: "local"
      ALWAYS_ON: "false"
    ports: ["8085:8080"]
